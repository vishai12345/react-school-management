(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[103],{1720:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||false;l.configurable=true;if("value"in l)l.writable=true;Object.defineProperty(e,l.key,l)}}return function(t,a,l){if(a)e(t.prototype,a);if(l)e(t,l);return t}}();var n=a(1);var r=T(n);var s=a(52);var i=a(105);var u=T(i);var c=a(1794);var o=T(c);var d=a(1796);var f=T(d);var m=a(1795);var E=T(m);var p=a(1802);var v=T(p);var b=a(1797);var h=T(b);var y=a(1799);var w=T(y);var g=a(124);var N=T(g);var x=a(94);var k=a(683);var C=T(k);var j=a(15);var _=a(200);var M=T(_);var S=a(47);var A=T(S);var O=a(686);var D=T(O);function T(e){return e&&e.__esModule?e:{default:e}}function R(e,t,a){if(t in e){Object.defineProperty(e,t,{value:a,enumerable:true,configurable:true,writable:true})}else{e[t]=a}return e}function P(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function z(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function B(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var H=function(e){B(t,e);function t(){var e;var a,l,n;P(this,t);for(var r=arguments.length,s=Array(r),i=0;i<r;i++){s[i]=arguments[i]}return n=(a=(l=z(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),l),l.state={sectionReload:false,newEmails:null,openConfirmationAlert:false,selectedDeletedEmail:null,snackbar:false,snackbarMessage:"",replyTextBox:false,selectedEmail:null,viewEmailDialog:false},l.handleCloseConfirmationAlert=function(){l.setState({openConfirmationAlert:false,viewEmailDialog:false})},a),z(l,n)}l(t,[{key:"componentDidMount",value:function e(){var t=this;M.default.get("newEmails.js").then(function(e){t.setState({newEmails:e.data})}).catch(function(e){console.log(e)})}},{key:"onDeleteEmail",value:function e(t){this.setState({openConfirmationAlert:true,selectedDeletedEmail:t})}},{key:"deleteEmail",value:function e(){this.setState({openConfirmationAlert:false,sectionReload:true});var t=this.state.newEmails;var a=t.indexOf(this.state.selectedDeletedEmail);t.splice(a,1);var l=this;setTimeout(function(){l.setState({sectionReload:false,newEmails:t,snackbar:true,snackbarMessage:"Email Deleted Successfully!"})},1500)}},{key:"showReplyTextBox",value:function e(t){var a=this.state.newEmails.indexOf(t);this.setState({newEmails:(0,N.default)(this.state.newEmails,R({},a,{replyTextBox:{$set:true}}))})}},{key:"replyEmail",value:function e(t){var a=this.state.newEmails.indexOf(t);this.setState({sectionReload:true});this.setState({newEmails:(0,N.default)(this.state.newEmails,R({},a,{replyTextBox:{$set:false}}))});var l=this;setTimeout(function(){l.setState({sectionReload:false,snackbar:true,snackbarMessage:"Reply Sent Successfully!"})},1500)}},{key:"onViewEmal",value:function e(t){this.setState({selectedEmail:t,viewEmailDialog:true})}},{key:"render",value:function e(){var t=this;var a=this.state,l=a.newEmails,i=a.selectedEmail,c=a.sectionReload;return r.default.createElement(n.Fragment,null,c&&r.default.createElement(D.default,null),r.default.createElement(x.Scrollbars,{className:"rct-scroll",autoHeight:true,autoHeightMin:100,autoHeightMax:400,autoHide:true},r.default.createElement("ul",{className:"new-mail mb-0 list-unstyled"},l&&l.map(function(e,a){return r.default.createElement("li",{key:a},r.default.createElement("div",{className:"d-flex justify-content-between"},r.default.createElement(s.Media,{className:"mb-10"},e.sender_avatar===""?r.default.createElement(C.default,{className:"mr-15"},e.sender_name.charAt(0)):r.default.createElement(s.Media,{object:true,src:e.sender_avatar,alt:"User Profile 1",className:"rounded-circle mr-15",width:"40",height:"40"}),r.default.createElement(s.Media,{body:true},r.default.createElement("h5",{className:"m-0 pt-5 fs-14"},e.sender_name),r.default.createElement("span",{className:"fs-12 align-self-center"},e.from))),r.default.createElement("span",{className:"small align-self-center"},"19 Mar 2017")),r.default.createElement("div",{className:"d-flex justify-content-between"},r.default.createElement("div",{className:"text-justify"},r.default.createElement("p",{className:"subject"},e.subject),r.default.createElement("p",{className:"message"},e.message),e.replyTextBox&&r.default.createElement("div",{className:"task-foot d-flex justify-content-between"},r.default.createElement(s.InputGroup,null,r.default.createElement(s.Input,null),r.default.createElement(s.InputGroupAddon,{addonType:"append"},r.default.createElement(u.default,{variant:"raised",color:"primary",className:"text-white",onClick:function a(){return t.replyEmail(e)}},r.default.createElement(A.default,{id:"button.reply"})))))),r.default.createElement("div",{className:"hover-action text-right w-25 align-self-center"},r.default.createElement(u.default,{color:"primary",className:"text-white mr-5 mb-5",variant:"fab",mini:true,onClick:function a(){return t.onViewEmal(e)}},r.default.createElement("i",{className:"zmdi zmdi-eye"})),r.default.createElement(u.default,{className:"btn-danger text-white mr-5 mb-5",variant:"fab",mini:true,onClick:function a(){return t.onDeleteEmail(e)}},r.default.createElement("i",{className:"zmdi zmdi-delete"})),r.default.createElement(u.default,{className:"btn-success text-white mr-5 mb-5",variant:"fab",mini:true,onClick:function a(){return t.showReplyTextBox(e)}},r.default.createElement("i",{className:"zmdi zmdi-mail-reply"})))))}))),r.default.createElement(o.default,{open:this.state.openConfirmationAlert,onClose:this.handleCloseConfirmationAlert,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.default.createElement(h.default,{id:"alert-dialog-title"},"Are You Sure Want To Delete?"),r.default.createElement(E.default,null,r.default.createElement(v.default,{id:"alert-dialog-description"},"This will delete the email permanently from your emails.")),r.default.createElement(f.default,null,r.default.createElement(u.default,{variant:"raised",className:"btn-danger text-white",onClick:this.handleCloseConfirmationAlert},r.default.createElement(A.default,{id:"button.cancel"})),r.default.createElement(u.default,{variant:"raised",color:"primary",className:"text-white",onClick:function e(){return t.deleteEmail()}},r.default.createElement(A.default,{id:"button.delete"})))),r.default.createElement(o.default,{open:this.state.viewEmailDialog,onClose:this.handleCloseConfirmationAlert,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.default.createElement(E.default,null,i!==null&&r.default.createElement("div",null,r.default.createElement("div",{className:"d-flex justify-content-between"},r.default.createElement(s.Media,{className:"mb-10"},i.sender_avatar===""?r.default.createElement(C.default,{className:"mr-15"},i.sender_name.charAt(0)):r.default.createElement(s.Media,{object:true,src:i.sender_avatar,alt:"User Profile 1",className:"rounded-circle mr-15",width:"40",height:"40"}),r.default.createElement(s.Media,{body:true},r.default.createElement("h5",{className:"m-0 pt-5 fs-14"},i.sender_name),r.default.createElement("span",{className:"fs-12 align-self-center"},i.from))),r.default.createElement("span",{className:"small align-self-center"},"19 Mar 2017")),r.default.createElement("div",{className:"d-flex justify-content-between"},r.default.createElement("div",{className:"text-justify"},r.default.createElement("p",{className:"subject"},i.subject),r.default.createElement("p",{className:"message"},i.message)))))),r.default.createElement(w.default,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.snackbar,onClose:function e(){return t.setState({snackbar:false})},autoHideDuration:2e3,snackbarcontentprops:{"aria-describedby":"message-id"},message:r.default.createElement("span",{id:"message-id"},this.state.snackbarMessage)}))}}]);return t}(n.Component);t.default=(0,j.withRouter)(H)}}]);